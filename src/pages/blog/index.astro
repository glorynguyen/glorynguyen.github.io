---
import BlogLayout from '../../layouts/BlogLayout.astro';
import PostCard from '../../components/PostCard.astro';
import { getCollection } from 'astro:content';

const posts = await getCollection('blog');
const sortedPosts = posts.sort((a, b) =>
  b.data.pubDate.valueOf() - a.data.pubDate.valueOf()
);
---

<BlogLayout
    title="Blog | Vinh Nguyen (Vincent)"
    description="Thoughts on software engineering, leadership, and technology by Vinh Nguyen (Vincent)."
    keywords="blog, software engineering, frontend, leadership, AI, technology"
    ogUrl="https://vinhnguyenba.dev/blog/"
    canonicalUrl="https://vinhnguyenba.dev/blog/"
>
    <!-- Page Title - English -->
    <div data-lang="en">
        <h1 class="page-title">Blog</h1>
        <p class="page-description">Thoughts on software engineering, leadership, and the evolving tech landscape.</p>
    </div>

    <!-- Page Title - Vietnamese -->
    <div data-lang="vi" hidden>
        <h1 class="page-title">Blog</h1>
        <p class="page-description">Những suy nghĩ về kỹ thuật phần mềm, lãnh đạo và bối cảnh công nghệ đang thay đổi.</p>
    </div>

    <!-- Posts List -->
    <div class="posts-list">
        {sortedPosts.map(post => (
            <PostCard
                slug={post.slug}
                pubDate={post.data.pubDate}
                title={post.data.title}
                titleVi={post.data.titleVi}
                description={post.data.description}
                descriptionVi={post.data.descriptionVi}
                tags={post.data.tags}
            />
        ))}
    </div>
</BlogLayout>
